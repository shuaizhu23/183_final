[[extend 'layout.html']]

<div class="section">
  <h1 class="title">Insert a Task</h1>
  [[=form]]
</div>

<div class="section" id="vue-target" v-cloak>
  <div class="field has-addons">
    <div class="control">
      <div v-if="!upload_done" class="file is-info">
        <label class="file-label">
          <input class="file-input" type="file" @change="upload_file($event)">
          <span class="file-cta">
            <span class="file-icon">
              <i v-if="uploading" class="fa fa-spinner fa-pulse fa-fw"></i>
              <i v-else class="fa fa-upload fa-fw"></i>
            </span>
            <span class="file-label">
              <span v-if="!uploading">Upload new file</span>
            </span>
          </span>
        </label>
      </div>
    </div>
    <p v-if="upload_done" class="control">
        <span> Uploaded file: {{uploaded_file}}</span>
    </p>
  </div>
</div>

[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
  let file_upload_url = "[[=XML(file_upload_url)]]";
</script>
<script src="js/index.js"></script>
[[end]]
