[[extend 'layout.html']]

<style>
  [v-cloak] {display: none;}
  .hidden {display:none;}
  .outline-icon {
    text-shadow: 0px 0px 3px #219CEF;
    color: white;
  }
  .genshin-text {
    color: #86623F;
    font-family: 'Marko One', sans-serif;
    color: #85623F;
    margin-bottom: 2rem;
    font-size: 48px;
  }
  .col {
    background-color: #A6D554;
    margin-right: 1rem;
  }
  .incomplete {
    background-color: grey;
  }
</style>


<div class="section" id="vue-target" v-cloak>
  <h1 class="title">Main Tasks {{done_tasks}}/{{total_tasks}}</h1>
  <div class="container block">
    <a style="margin-bottom: 1.5rem;" class="button is-success" href="[[=URL('add')]]">
      <span class="icon"><i class="fa fa-plus"></i></span>
      <span>Add</span>
    </a>

    <div v-for="r in rows" class="box" style="background-color: #F5F5F5;">
      <p style="font-size: 20px">{{r.task_title}}</p>
      <!-- v-if="r.task_img == 'img/default_task.png'" -->
      <!-- <img v-if="r.thumbnail" width="50" :src="r.thumbnail" /> -->
      <div style="display:flex">
        <img v-bind:src="r.task_img" style="width: 200px">
        <div class="control" style="margin: 1rem 0 0 1rem;">
          <div class="file is-info">
            <label class="file-label">
              <input class="file-input" type="file"
                 accept=".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|image/*"
                 @change="upload_file($event, r._idx)">
              <span class="file-cta">
                <span class="file-label">
                  <span><i class="fa fa-upload"></i></span>
                </span>
              </span>
            </label>
          </div>
        </div>
        <div @click="set_task(r._idx, r.task_done)" style="margin-left: auto;">
          <i class="fa fa-3x" style="color:green"
          :class="{'fa-check-square': r.task_done == 1,
              'fa-square': r.task_done != 1,}">
          </i>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Removed highlights -->
[[block page_scripts]]
<!-- Loads the index-specific js for Vue -->
<script>
  let load_tasks_url = "[[=XML(load_tasks_url)]]";
  let set_task_url = "[[=XML(set_task_url)]]";

  let upload_thumbnail_url = "[[=XML(upload_thumbnail_url)]]";

  let user_email = "[[=XML(user_email)]]"
  let display_full_name = "[[=XML(display_full_name)]]";
</script>
<script src="js/index.js"></script>
[[end]]
